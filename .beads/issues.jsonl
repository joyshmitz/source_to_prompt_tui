{"id":"s2p-1oz","title":"Update Documentation for Production Release","description":"Update README.md to reflect recent improvements:\\n1. Windows support (clip.exe, new file extensions).\\n2. CLI arguments (s2p \u003cdir\u003e) and --help flag.\\n3. Performance notes (virtual scrolling, parallel scanning).\\n4. Updated installation notes if needed.","status":"closed","priority":1,"issue_type":"chore","created_at":"2025-12-13T20:30:36.627001-05:00","updated_at":"2025-12-13T20:35:54.588778-05:00","closed_at":"2025-12-13T20:35:54.588778-05:00","comments":[{"id":40,"issue_id":"s2p-1oz","author":"jemanuel","text":"Updated README.md with Windows support details, CLI argument usage, and troubleshooting tips. Verified feature descriptions match the hardened codebase.","created_at":"2025-12-14T01:35:54Z"},{"id":41,"issue_id":"s2p-1oz","author":"jemanuel","text":"Starting work: auditing README vs current behavior (Windows clipboard via clip.exe, Windows text extensions, CLI args/--help, perf notes incl concurrency).","created_at":"2025-12-14T01:38:21Z"}]}
{"id":"s2p-4ro","title":"Fix scan metadata for empty/large files","description":"Scan-time metadata has two correctness issues: (1) empty text files are counted as 1 line because \"\".split(/\\r?\\n/) yields [\"\"] (length 1); (2) large text files (\u003e5MB) are not read during scan but still get cached tokens=0 and numLines=0, which misleads the Explorer/stats and can severely undercount tokens.","design":"In scanProject: - For files read during scan (\u003c=5MB), compute numLines as (content.length===0?0:split length) and set tokens=countTokens(content). - For large text files (\u003e5MB), set numLines=-1 (unknown) and omit tokens so estimates fall back to bytes/4.","acceptance_criteria":"- Empty text files show 0 lines in Explorer/stats\\n- Large text files show ? lines (unknown)\\n- Large text files do not report 0 tokens; estimates use bytes/4 until generation","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-13T16:16:10.091466-05:00","updated_at":"2025-12-13T16:19:28.912796-05:00","closed_at":"2025-12-13T16:19:28.912796-05:00","comments":[{"id":24,"issue_id":"s2p-4ro","author":"jemanuel","text":"Starting: fix scan-time empty-file line counts so Explorer/stats show 0 lines for empty files (consistent with combined output).","created_at":"2025-12-13T21:16:39Z"},{"id":25,"issue_id":"s2p-4ro","author":"jemanuel","text":"Scope expanded: also fix large-file scan metadata so tokens aren't cached as 0 and line count is marked unknown (-1) when content isn't read.","created_at":"2025-12-13T21:18:55Z"},{"id":26,"issue_id":"s2p-4ro","author":"jemanuel","text":"Implemented scanProject metadata fixes: empty files now report 0 lines; large text files now use numLines=-1 (unknown) and omit cached tokens so token estimates fall back to bytes/4.","created_at":"2025-12-13T21:19:28Z"}]}
{"id":"s2p-567","title":"Add ? as help toggle","description":"F1 is inconsistent across terminals; add '?' as a reliable help toggle and surface it in the footer + help modal + CLI help.","design":"Handle input==='?' when no text field is focused to toggle help. Allow '?' to also close the help modal. Update footer hint and HelpModal copy; update README shortcut table and --help output.","acceptance_criteria":"- '?' toggles help when not editing a text field\\n- '?' closes help modal\\n- Footer/HelpModal/README reflect the shortcut","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-13T20:29:06.171864-05:00","updated_at":"2025-12-13T20:30:20.559004-05:00","closed_at":"2025-12-13T20:30:20.559004-05:00","comments":[{"id":38,"issue_id":"s2p-567","author":"jemanuel","text":"Starting: add '?' as a universal help toggle (safer than F1 across terminals) and update footer/help/README.","created_at":"2025-12-14T01:29:15Z"},{"id":39,"issue_id":"s2p-567","author":"jemanuel","text":"Implemented '?' as a reliable help toggle (and close) without interfering with text inputs; updated HelpModal copy, footer hint, CLI --help output, and README shortcut table.","created_at":"2025-12-14T01:30:20Z"}]}
{"id":"s2p-5fm","title":"Fix Explorer row rendering (icons + layout)","description":"Explorer rows currently compute icon/lineCount but don't render the icon and have malformed JSX formatting, degrading readability and potentially confusing selection state.","design":"Refactor the visibleNodes.map render to consistently show: cursor marker, indent, icon, label (relPath in filter mode, basename in tree mode), and size/lines/binary. Keep color semantics and large/too-large indicators.","acceptance_criteria":"- Explorer rows show icon ([x]/[ ]/[+]/[-]/[~]/[!])\\n- Filter mode shows relPath for context\\n- Layout/indentation is clean and stable","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-13T19:08:31.529224-05:00","updated_at":"2025-12-13T19:10:43.573881-05:00","closed_at":"2025-12-13T19:10:43.573881-05:00","comments":[{"id":35,"issue_id":"s2p-5fm","author":"jemanuel","text":"Starting: fix Explorer JSX row rendering to actually show icon + clean layout; improve label in filter mode to show relPath for context.","created_at":"2025-12-14T00:08:40Z"},{"id":36,"issue_id":"s2p-5fm","author":"jemanuel","text":"Fixed Explorer row rendering: icons restored, layout cleaned, and filter mode now shows relPath for context. This makes selection state + large/too-large indicators visible again.","created_at":"2025-12-14T00:10:43Z"}]}
{"id":"s2p-7mc","title":"Premium UX + correctness (v0.3.x)","description":"Goal: bring s2p to 'premium' terminal UX while improving correctness and predictability.\\n\\nBackground: s2p is a 3-pane Ink TUI that scans a repo (gitignore-aware) and generates an LLM-ready combined prompt. Current implementation is functional but has some correctness gaps (nested .gitignore semantics, minify loader selection) and UX rough edges (scrolling, multi-line editing).\\n\\nNon-goals: large-scale multi-file refactor; changing the output format spec.","design":"Approach: keep the single-file architecture in src/index.tsx; make small, testable helper functions; prioritize correctness and user-flow improvements that reduce friction for everyday use.","acceptance_criteria":"- Top-priority child issues are defined with clear deps\\n- Each child issue is independently shippable\\n- No regression in basic scan/select/generate workflow","status":"closed","priority":2,"issue_type":"epic","created_at":"2025-12-13T03:53:18.468841-05:00","updated_at":"2025-12-13T15:12:14.698495-05:00","closed_at":"2025-12-13T15:12:14.698495-05:00","comments":[{"id":17,"issue_id":"s2p-7mc","author":"jemanuel","text":"All child beads completed: .gitignore correctness, minify loader fix, scrollable preview + prompt sample pane, editor-based multiline inputs, filter bulk actions, large file lazy selection/preview, and option-aware token estimation.","created_at":"2025-12-13T20:12:09Z"}]}
{"id":"s2p-7mc.1","title":"Fix recursive .gitignore semantics (nested + negation)","description":"s2p scans directories and attempts to respect nested .gitignore files. Current implementation builds a single Ignore matcher by prefixing nested patterns, but it mishandles important .gitignore semantics (notably negation patterns like '!foo', anchored patterns, and directory-relative rules). This can cause files to be unexpectedly included or excluded.","design":"Implement a small, correct gitignore evaluator: walk directories, load each .gitignore with proper base path semantics, and evaluate ignores per-path using ordered rule sets (including negation). Prefer correctness over micro-optimizations; keep it compile-friendly (no native deps).","acceptance_criteria":"- Nested .gitignore negations work (e.g., '!keep.txt')\\n- Leading '/' patterns behave relative to the gitignore directory\\n- Behavior matches 'git check-ignore' for common cases\\n- No regression in scan speed on typical repos","notes":"Starting: rework ignore handling to correctly support nested .gitignore + negation","status":"closed","priority":0,"issue_type":"bug","created_at":"2025-12-13T03:54:01.343555-05:00","updated_at":"2025-12-13T04:04:45.925785-05:00","closed_at":"2025-12-13T04:04:45.925785-05:00","dependencies":[{"issue_id":"s2p-7mc.1","depends_on_id":"s2p-7mc","type":"parent-child","created_at":"2025-12-13T03:54:01.343984-05:00","created_by":"daemon"}],"comments":[{"id":2,"issue_id":"s2p-7mc.1","author":"jemanuel","text":"Implementing ignore evaluation with a per-directory .gitignore stack (uses ignore().test on paths relative to each .gitignore). This should fix negation and directory pattern handling.","created_at":"2025-12-13T09:02:26Z"},{"id":3,"issue_id":"s2p-7mc.1","author":"jemanuel","text":"Replaced prefix-based pattern flattening with an ignore stack: each directory loads its own .gitignore into an Ignore matcher and shouldIgnorePath applies matchers in order on paths relative to each base (with trailing '/' for directories). This fixes negation and directory patterns.","created_at":"2025-12-13T09:04:41Z"}]}
{"id":"s2p-7mc.10","title":"Add AGENTS.md (agent onboarding)","description":"Repo lacked AGENTS.md but workflows reference it. Add a short, accurate AGENTS.md with key commands, beads usage, and UX principles.","acceptance_criteria":"- AGENTS.md exists at repo root\\n- Includes commands and beads robot flags\\n- No stale or misleading instructions","status":"closed","priority":2,"issue_type":"chore","created_at":"2025-12-13T03:55:00.327405-05:00","updated_at":"2025-12-13T03:55:29.963536-05:00","closed_at":"2025-12-13T03:55:29.963536-05:00","dependencies":[{"issue_id":"s2p-7mc.10","depends_on_id":"s2p-7mc","type":"parent-child","created_at":"2025-12-13T03:55:00.327762-05:00","created_by":"daemon"}]}
{"id":"s2p-7mc.2","title":"Fix JS/TS minify loader selection (Bun.transform)","description":"When minify is enabled, s2p uses Bun.transform with a loader. The current mapping uses the 'tsx' loader for both .ts and .tsx files, which can mis-parse valid TypeScript (TSX parsing ambiguities) and cause minify failures or incorrect output.","design":"Use 'ts' loader for .ts, 'tsx' for .tsx, 'js' for .js/.mjs/.cjs, and 'jsx' for .jsx. Keep the terser fallback.","acceptance_criteria":"- Minify works for .ts and .tsx inputs\\n- No TSX parse ambiguity regressions\\n- Falls back to terser cleanly on Bun.transform errors","notes":"Starting: fix Bun.transform loader mapping for .ts vs .tsx","status":"closed","priority":0,"issue_type":"bug","created_at":"2025-12-13T03:54:01.402546-05:00","updated_at":"2025-12-13T03:56:50.78201-05:00","closed_at":"2025-12-13T03:56:50.78201-05:00","dependencies":[{"issue_id":"s2p-7mc.2","depends_on_id":"s2p-7mc","type":"parent-child","created_at":"2025-12-13T03:54:01.402868-05:00","created_by":"daemon"}],"comments":[{"id":1,"issue_id":"s2p-7mc.2","author":"jemanuel","text":"Updated Bun.transform loader mapping: .ts uses 'ts' (not 'tsx'), .tsx uses 'tsx'.","created_at":"2025-12-13T08:56:40Z"}]}
{"id":"s2p-7mc.3","title":"Scrollable file preview pane","description":"The right-side FILE PREVIEW pane shows only a truncated slice of the file and cannot be scrolled. For real-world files this makes reading context frustrating.","design":"Add preview scroll state and keybindings when Preview pane is active: j/k (line scroll), g/G (top/bottom), PageUp/PageDown. Reuse ScrollableBox for rendering lines.","acceptance_criteria":"- When Preview pane is active, j/k scroll file preview\\n- Cursor movement in explorer is unaffected\\n- Works with syntax highlighting or plaintext rendering","notes":"Starting: add scroll state + keybindings for file preview pane","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-13T03:54:01.452946-05:00","updated_at":"2025-12-13T04:17:22.218417-05:00","closed_at":"2025-12-13T04:17:22.218417-05:00","dependencies":[{"issue_id":"s2p-7mc.3","depends_on_id":"s2p-7mc","type":"parent-child","created_at":"2025-12-13T03:54:01.453264-05:00","created_by":"daemon"}],"comments":[{"id":8,"issue_id":"s2p-7mc.3","author":"jemanuel","text":"Implement previewScrollOffset + windowed SyntaxHighlight slice; add j/k + PgUp/PgDn + g/G scrolling when Preview pane is active.","created_at":"2025-12-13T09:15:10Z"},{"id":9,"issue_id":"s2p-7mc.3","author":"jemanuel","text":"Added preview scrolling: preview pane renders a windowed slice with line-range indicator; j/k scroll, b/Space page, g/G top/bottom. Help updated.","created_at":"2025-12-13T09:17:17Z"}]}
{"id":"s2p-7mc.4","title":"Multiline editing for preamble/goal via $EDITOR","description":"Preamble/Goal inputs are currently single-line TextInputs, which is awkward for real prompt instructions. Users need multi-line editing.","design":"Implement an '$EDITOR' flow: write current text to a temp file, spawn $EDITOR, read file back, and update state. Provide a small modal/help hint and a fallback editor (e.g., 'vi' or 'nano') when $EDITOR is unset.","acceptance_criteria":"- Users can edit preamble and goal as multi-line text\\n- Works on macOS and Linux\\n- Cancelling editor leaves text unchanged","notes":"Starting: external -based multiline editing for preamble/goal","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-13T03:54:26.543984-05:00","updated_at":"2025-12-13T04:10:58.42947-05:00","closed_at":"2025-12-13T04:10:58.42947-05:00","dependencies":[{"issue_id":"s2p-7mc.4","depends_on_id":"s2p-7mc","type":"parent-child","created_at":"2025-12-13T03:54:26.544344-05:00","created_by":"daemon"}],"comments":[{"id":4,"issue_id":"s2p-7mc.4","author":"jemanuel","text":"Plan: add Ctrl+E to open  for preamble/goal (writes temp file, spawns editor with stdio=inherit, reads back). Temporarily disable raw mode during edit, then re-render.","created_at":"2025-12-13T09:06:38Z"},{"id":5,"issue_id":"s2p-7mc.4","author":"jemanuel","text":"Implemented Ctrl+E editor flow: writes temp file, spawns / (fallback vi) with stdio=inherit, reloads text, and restores Ink raw mode. Updated help/footer hints.","created_at":"2025-12-13T09:10:55Z"}]}
{"id":"s2p-7mc.5","title":"Prompt sample pane scroll/collapse","description":"The PROMPT SAMPLE section can grow large and may crowd the UI on smaller terminals. It also cannot be scrolled independently.","design":"Make the prompt sample area collapsible and/or scrollable (similar to combined view). Keep default behavior simple.","acceptance_criteria":"- Prompt sample can be collapsed or scrolled\\n- Layout remains stable on 80x24 terminals","notes":"Starting: make PROMPT SAMPLE collapsible + scrollable; add pane focus + keybindings","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-13T03:54:26.597964-05:00","updated_at":"2025-12-13T14:43:33.574503-05:00","closed_at":"2025-12-13T14:43:33.574503-05:00","dependencies":[{"issue_id":"s2p-7mc.5","depends_on_id":"s2p-7mc","type":"parent-child","created_at":"2025-12-13T03:54:26.598297-05:00","created_by":"daemon"}],"comments":[{"id":10,"issue_id":"s2p-7mc.5","author":"jemanuel","text":"Approach: add a 4th pane ('sample') to Tab cycle; render PROMPT SAMPLE in a fixed-height scroll box with j/k + b/Space + g/G, and 'z' to collapse/expand. Keep layout stable for 80x24.","created_at":"2025-12-13T19:38:23Z"},{"id":11,"issue_id":"s2p-7mc.5","author":"jemanuel","text":"Implemented prompt sample pane as a real focusable pane: fixed-height + scrollable with j/k, b/Space, g/G; 'z' toggles collapse/expand; Tab now cycles explorer/config/preview/sample. Help + footer updated.","created_at":"2025-12-13T19:43:30Z"}]}
{"id":"s2p-7mc.6","title":"Filter actions: select/deselect all matches","description":"Filter mode supports clearing selection ('u') but not selecting all matches. Selecting many files via filter is a common workflow.","design":"Add shortcuts while Explorer pane active and filter non-empty: 'a' select all matching text files; 'A' deselect all matching text files. Reuse the existing clearSelectionInFilter logic.","acceptance_criteria":"- 'a' selects all filtered matches\\n- 'A' deselects all filtered matches\\n- Status text reports how many changed","notes":"Starting: add select/deselect-all for current filter (a/A)","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-13T03:54:26.655047-05:00","updated_at":"2025-12-13T04:12:33.430813-05:00","closed_at":"2025-12-13T04:12:33.430813-05:00","dependencies":[{"issue_id":"s2p-7mc.6","depends_on_id":"s2p-7mc","type":"parent-child","created_at":"2025-12-13T03:54:26.655457-05:00","created_by":"daemon"}],"comments":[{"id":6,"issue_id":"s2p-7mc.6","author":"jemanuel","text":"Add 'a' to select all text files matching current filter and 'A' to deselect them (Explorer pane, filter non-empty).","created_at":"2025-12-13T09:11:10Z"},{"id":7,"issue_id":"s2p-7mc.6","author":"jemanuel","text":"Implemented filter bulk actions: 'a' selects all filtered text files, 'A' deselects them; tightened 'u' to only clear matching text files; updated help.","created_at":"2025-12-13T09:12:29Z"}]}
{"id":"s2p-7mc.7","title":"Token estimate reflects minify/comment-stripping (fast path)","description":"The live token counter estimates tokens from raw file size/content but ignores minify/comment-strip options, leading to misleading context usage.","design":"For selected files with cached content, compute token counts using transformed content when options are enabled. For uncached/large files, keep a conservative approximation to avoid expensive reads.","acceptance_criteria":"- Token estimate changes when toggling minify/remove comments\\n- No noticeable lag on common selections","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-13T03:54:26.708017-05:00","updated_at":"2025-12-13T15:11:56.788276-05:00","closed_at":"2025-12-13T15:11:56.788276-05:00","dependencies":[{"issue_id":"s2p-7mc.7","depends_on_id":"s2p-7mc","type":"parent-child","created_at":"2025-12-13T03:54:26.708325-05:00","created_by":"daemon"},{"issue_id":"s2p-7mc.7","depends_on_id":"s2p-7mc.2","type":"blocks","created_at":"2025-12-13T03:54:52.240767-05:00","created_by":"daemon"}],"comments":[{"id":15,"issue_id":"s2p-7mc.7","author":"jemanuel","text":"Starting: update live token estimate so it reflects remove-comments/minify options without making UI lag; likely add cached/async transformed-token counting for selected files.","created_at":"2025-12-13T20:02:33Z"},{"id":16,"issue_id":"s2p-7mc.7","author":"jemanuel","text":"Implemented live token estimation that reacts to remove-comments/minify: uses cached transformed token counts for \u003c=5MB files, stays conservative for larger/uncached files, and updates progressively in the background (debounced + yielding to avoid UI lag).","created_at":"2025-12-13T20:11:52Z"}]}
{"id":"s2p-7mc.8","title":"Allow selecting large text files (lazy load + warnings)","description":"Text files larger than MAX_READ_BYTES are currently treated as non-text and cannot be selected, even if they are important (e.g., large SQL migrations, lockfiles, generated JSON).","design":"Keep a separate 'isTextLike' classification and allow selection while lazily reading content on-demand during generation (with an explicit size warning and/or optional size cap).","acceptance_criteria":"- Large text files can be selected and included\\n- UI warns about large inclusions\\n- Generation remains stable (no OOM)","notes":"Starting: treat large text files as selectable (no scan-time read), add preview truncation and size warnings","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-13T03:54:26.75992-05:00","updated_at":"2025-12-13T15:02:12.861052-05:00","closed_at":"2025-12-13T15:02:12.861052-05:00","dependencies":[{"issue_id":"s2p-7mc.8","depends_on_id":"s2p-7mc","type":"parent-child","created_at":"2025-12-13T03:54:26.76044-05:00","created_by":"daemon"}],"comments":[{"id":13,"issue_id":"s2p-7mc.8","author":"jemanuel","text":"Plan: keep isText true for text-like files even when \u003e MAX_READ_BYTES (content stays empty, numLines=-1). Preview shows a small head snippet w/ warning. Selection/quick-select/filter will exclude absurdly huge files via a MAX_INCLUDE_BYTES safety cap and warn on large inclusions.","created_at":"2025-12-13T19:48:11Z"},{"id":14,"issue_id":"s2p-7mc.8","author":"jemanuel","text":"Large text selection now stable: preview shows loading state and avoids race; prompt sample uses head snippet for large files; directory toggle reports when no selectable files; head reader propagates errors for proper messaging.","created_at":"2025-12-13T20:02:04Z"}]}
{"id":"s2p-7mc.9","title":"Polish help + keybinding consistency","description":"Some key hints are duplicated or inconsistent across the help modal and footer. Tightening this improves discoverability and perceived quality.","design":"Audit shortcuts, remove inconsistencies, and ensure the help modal matches actual behavior.","acceptance_criteria":"- Help text matches current keybindings\\n- No duplicate/confusing entries","notes":"Auditing help modal/footer/hints to match actual keybindings (now includes sample pane + z + Ctrl+E)","status":"closed","priority":2,"issue_type":"chore","created_at":"2025-12-13T03:54:26.814062-05:00","updated_at":"2025-12-13T14:45:36.519724-05:00","closed_at":"2025-12-13T14:45:36.519724-05:00","dependencies":[{"issue_id":"s2p-7mc.9","depends_on_id":"s2p-7mc","type":"parent-child","created_at":"2025-12-13T03:54:26.814359-05:00","created_by":"daemon"},{"issue_id":"s2p-7mc.9","depends_on_id":"s2p-7mc.3","type":"blocks","created_at":"2025-12-13T03:54:52.285127-05:00","created_by":"daemon"},{"issue_id":"s2p-7mc.9","depends_on_id":"s2p-7mc.4","type":"blocks","created_at":"2025-12-13T03:54:52.325105-05:00","created_by":"daemon"},{"issue_id":"s2p-7mc.9","depends_on_id":"s2p-7mc.5","type":"blocks","created_at":"2025-12-13T03:54:52.364588-05:00","created_by":"daemon"},{"issue_id":"s2p-7mc.9","depends_on_id":"s2p-7mc.6","type":"blocks","created_at":"2025-12-13T03:54:52.407812-05:00","created_by":"daemon"}],"comments":[{"id":12,"issue_id":"s2p-7mc.9","author":"jemanuel","text":"Help modal + footer updated for new shortcuts: preview scroll, sample pane scroll + z collapse, Ctrl+E editor, filter a/A. Doing a quick consistency sweep before closing.","created_at":"2025-12-13T19:45:15Z"}]}
{"id":"s2p-84e","title":"Update README to match current UX/keybindings","description":"README keyboard shortcuts + behavior have drifted from the app (filter bulk select a/A, prompt sample collapse z, scrollable preview/sample panes, Ctrl+E external editor, large file selection limits).","design":"Update README sections: Keyboard Shortcuts, Scanning Algorithm, Performance limits, Troubleshooting. Keep wording consistent with in-app help.","acceptance_criteria":"- README shortcut tables include a/A, z, preview/sample scrolling, Ctrl+E\\n- README docs large file behavior (5MB scan read, 25MB include cap, head preview)\\n- No contradictions with app/help","status":"closed","priority":2,"issue_type":"chore","created_at":"2025-12-13T15:27:40.33517-05:00","updated_at":"2025-12-13T15:30:02.518143-05:00","closed_at":"2025-12-13T15:30:02.518143-05:00","comments":[{"id":22,"issue_id":"s2p-84e","author":"jemanuel","text":"Starting: bring README.md back in sync with actual shortcuts/UX (a/A, z, Ctrl+E, preview/sample scrolling) and updated large-file behavior/limits.","created_at":"2025-12-13T20:27:53Z"},{"id":23,"issue_id":"s2p-84e","author":"jemanuel","text":"Updated README keyboard shortcuts (a/A, z, Ctrl+E, preview/sample scrolling) and docs for large-file behavior/limits (5MB scan read, 25MB include cap, head preview) to match current app.","created_at":"2025-12-13T20:29:58Z"}]}
{"id":"s2p-8rx","title":"Production Hardening \u0026 Performance Optimization","description":"Comprehensive review and refactor to ensure production readiness.\nKey areas:\n1. Performance: Virtual scrolling for Explorer/Output (O(N) -\u003e O(1)), Parallel scanning with concurrency limits.\n2. Stability: Fixed race conditions in scanning (scanId), prevented EMFILE errors.\n3. Correctness: Stacked Ignore Strategy for .gitignore (fixed recursive/nested bugs).\n4. Memory: Incremental stats calculation for large exports.\n5. Cross-platform: Native clipboard (Bun.spawn) including Windows clip.exe support.\n6. UX: Restored CLI args support, added Help flag, fixed directory filter selection.","status":"closed","priority":0,"issue_type":"epic","created_at":"2025-12-13T19:11:51.547851-05:00","updated_at":"2025-12-13T19:12:06.45425-05:00","closed_at":"2025-12-13T19:12:06.45425-05:00","comments":[{"id":37,"issue_id":"s2p-8rx","author":"jemanuel","text":"All tasks completed and verified. Build passes. Typecheck passes. Unit logic verified. Virtual scrolling, race condition fixes, and Windows support are live.","created_at":"2025-12-14T00:12:11Z"}]}
{"id":"s2p-9z1","title":"Show progress during prompt generation","description":"For large selections or large files, Ctrl+G can take noticeable time with only a static \"Generating\" message. Provide clear progress feedback (file i/N + current path) without making the UI laggy.","design":"Add optional onProgress callback to buildCombinedOutput; in handleGenerate pass a throttled callback that updates status (e.g. every ~100ms or every few files). Keep Combined Output view behavior unchanged.","acceptance_criteria":"- While generating, status updates show progress (i/N + file path)\\n- No noticeable UI lag on common selections\\n- Combined Output view still opens on completion","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-13T17:23:47.584525-05:00","updated_at":"2025-12-13T17:24:52.395868-05:00","closed_at":"2025-12-13T17:24:52.395868-05:00","comments":[{"id":33,"issue_id":"s2p-9z1","author":"jemanuel","text":"Starting: add throttled status progress (i/N + relPath) during buildCombinedOutput so long generations feel responsive.","created_at":"2025-12-13T22:23:55Z"},{"id":34,"issue_id":"s2p-9z1","author":"jemanuel","text":"Implemented: buildCombinedOutput accepts optional onProgress callback; Ctrl+G now updates status during generation with throttled (i/N) + relPath, improving responsiveness on large selections.","created_at":"2025-12-13T22:24:52Z"}]}
{"id":"s2p-ck3","title":"C-style comment stripping avoids escaped delimiters","description":"stripCommentsGeneric may misinterpret escaped comment delimiters inside regex-like contexts (e.g. patterns containing \\/\\* or \\/\\/ right before a regex delimiter) and truncate code. Make it ignore // and /* when preceded by a backslash to reduce false-positives while keeping the feature lightweight.","design":"In stripCommentsGeneric (not in string/comment), only start line/block comments for // or /* when the preceding character is not a backslash.","acceptance_criteria":"- removeComments no longer truncates JS-like regex patterns containing escaped slashes near delimiters\\n- Typical // and /* comments are still removed","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-12-13T16:22:20.71184-05:00","updated_at":"2025-12-13T16:22:46.826569-05:00","closed_at":"2025-12-13T16:22:46.826569-05:00","comments":[{"id":29,"issue_id":"s2p-ck3","author":"jemanuel","text":"Starting: adjust stripCommentsGeneric to not treat // or /* as comments when preceded by backslash (reduces regex/escaped-delimiter false positives).","created_at":"2025-12-13T21:22:30Z"},{"id":30,"issue_id":"s2p-ck3","author":"jemanuel","text":"Implemented: stripCommentsGeneric now ignores // and /* when preceded by a backslash (outside strings), reducing false-positives in regex/escaped-delimiter contexts while preserving normal comment stripping.","created_at":"2025-12-13T21:22:46Z"}]}
{"id":"s2p-e6m","title":"Python comment stripping removes inline # comments","description":"After making hash-comment stripping conservative to avoid Ruby regex truncation, Python inline comments like x=1#comment are no longer removed. For Python, # should start a comment anywhere outside quotes.","design":"Add a Python-specific hash comment stripper (aggressive: # starts comment anywhere outside quotes; preserve shebang). Use it for .py; keep conservative variant for .rb/.sh/.bash.","acceptance_criteria":"- For .py, removeComments strips x=1#comment and x=1 #comment (outside quotes)\\n- For .rb, patterns like /foo#bar/ are preserved\\n- Shebang remains intact","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-12-13T17:21:43.527915-05:00","updated_at":"2025-12-13T17:22:36.479781-05:00","closed_at":"2025-12-13T17:22:36.479781-05:00","comments":[{"id":31,"issue_id":"s2p-e6m","author":"jemanuel","text":"Starting: add Python-specific hash comment stripping so inline # comments are removed while keeping Ruby conservative behavior.","created_at":"2025-12-13T22:21:52Z"},{"id":32,"issue_id":"s2p-e6m","author":"jemanuel","text":"Implemented: split hash-comment stripping into Python-specific (aggressive: # starts comment anywhere outside quotes; preserves shebang) and conservative variant for Ruby/shell to avoid regex truncation. transformFileContent now routes .py to the Python stripper.","created_at":"2025-12-13T22:22:36Z"}]}
{"id":"s2p-g62","title":"Generate without auto-copy (copy on Y)","description":"Ctrl+G currently generates *and* copies output to clipboard automatically, which is surprising and contradicts README guidance (copy should be explicit via Y).","design":"Remove implicit clipboard copy in handleGenerate; keep Combined Output view workflow unchanged; update status text to tell user to press Y to copy.","acceptance_criteria":"- Ctrl+G no longer writes to clipboard\\n- Y in Combined Output still copies\\n- Status line after generate points to Y","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-12-13T15:14:08.387814-05:00","updated_at":"2025-12-13T15:14:59.421488-05:00","closed_at":"2025-12-13T15:14:59.421488-05:00","comments":[{"id":18,"issue_id":"s2p-g62","author":"jemanuel","text":"Starting: remove implicit clipboard write on Ctrl+G; keep explicit [Y] copy in Combined Output view; update status message accordingly.","created_at":"2025-12-13T20:14:25Z"},{"id":19,"issue_id":"s2p-g62","author":"jemanuel","text":"Done: Ctrl+G now only generates + opens Combined Output view; clipboard writes are explicit via [Y]. Status message points to Y.","created_at":"2025-12-13T20:14:54Z"}]}
{"id":"s2p-qlo","title":"Make hash-comment stripping conservative","description":"Current hash-style comment stripping can corrupt Ruby (e.g. regex literals like /foo#bar/) by treating # as comment anywhere outside quotes. Make it conservative to avoid destroying code: only strip # when it starts a comment token (start-of-line after whitespace or preceded by whitespace), while preserving shebang.","design":"In stripHashComments, treat # as comment start only when i==0 or previous char is whitespace (and not inside quotes). Keep existing shebang preservation.","acceptance_criteria":"- Lines like '# comment' and 'x = 1 # comment' are stripped\\n- Ruby regex literals like '/foo#bar/' are not truncated\\n- Shebang remains intact","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-12-13T16:20:34.208156-05:00","updated_at":"2025-12-13T16:21:03.023574-05:00","closed_at":"2025-12-13T16:21:03.023574-05:00","comments":[{"id":27,"issue_id":"s2p-qlo","author":"jemanuel","text":"Starting: tighten stripHashComments so it only strips # when it begins a comment token (whitespace/start-of-line), preventing Ruby regex /foo#bar/ truncation.","created_at":"2025-12-13T21:20:44Z"},{"id":28,"issue_id":"s2p-qlo","author":"jemanuel","text":"Implemented conservative # stripping: only strips when # is at start-of-line or preceded by whitespace (outside quotes), preserving Ruby regex patterns like /foo#bar/ and shebang.","created_at":"2025-12-13T21:21:02Z"}]}
{"id":"s2p-vt6","title":"Comment stripping applies even when minify is ON","description":"When both removeComments and minify are enabled, transformFileContent currently runs only the minify path (else-if), so comment stripping is skipped for languages where minify is just whitespace trimming (e.g. .py/.rb/.sh). This contradicts README and yields larger prompts + misleading token counts.","design":"Refactor transformFileContent to apply removeComments first for non-JS/TS paths (hash/html/generic), then apply minify. Avoid naive JS comment stripping when minify is enabled; rely on Bun.transform/Terser comment removal.","acceptance_criteria":"- With minify=ON, toggling removeComments changes output for .py/.rb/.sh and other supported types\\n- JS/TS paths still rely on minifier for comments when minify=ON\\n- README behavior is honored (strip before minify)","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-13T15:24:07.011499-05:00","updated_at":"2025-12-13T15:26:04.185281-05:00","closed_at":"2025-12-13T15:26:04.185281-05:00","comments":[{"id":20,"issue_id":"s2p-vt6","author":"jemanuel","text":"Starting: refactor transformFileContent so removeComments runs even when minify is enabled (esp. .py/.rb/.sh); keep JS/TS comment handling via minifier when minify=ON.","created_at":"2025-12-13T20:24:22Z"},{"id":21,"issue_id":"s2p-vt6","author":"jemanuel","text":"Implemented: transformFileContent now applies removeComments first (when enabled) even if minify is also ON; JS/TS relies on minifier for safe comment removal when minify=ON. Improved hash-comment stripping to preserve shebang and avoid stripping # inside quotes.","created_at":"2025-12-13T20:25:59Z"}]}
